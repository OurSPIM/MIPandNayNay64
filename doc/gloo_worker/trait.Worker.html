<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Declares the behaviour of a worker."><meta name="keywords" content="rust, rustlang, rust-lang, Worker"><title>Worker in gloo_worker - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../gloo_worker/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../gloo_worker/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Worker</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Input">Input</a></li><li><a href="#associatedtype.Message">Message</a></li><li><a href="#associatedtype.Output">Output</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.create">create</a></li><li><a href="#tymethod.received">received</a></li><li><a href="#tymethod.update">update</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.connected">connected</a></li><li><a href="#method.destroy">destroy</a></li><li><a href="#method.disconnected">disconnected</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In gloo_worker</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="index.html">gloo_worker</a>::<wbr><a class="trait" href="#">Worker</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/gloo_worker/traits.rs.html#9-65">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait Worker: <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + 'static {
    type <a href="#associatedtype.Message" class="associatedtype">Message</a>;
    type <a href="#associatedtype.Input" class="associatedtype">Input</a>: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> + for&lt;'de&gt; <a class="trait" href="../serde/de/trait.Deserialize.html" title="trait serde::de::Deserialize">Deserialize</a>&lt;'de&gt;;
    type <a href="#associatedtype.Output" class="associatedtype">Output</a>: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> + for&lt;'de&gt; <a class="trait" href="../serde/de/trait.Deserialize.html" title="trait serde::de::Deserialize">Deserialize</a>&lt;'de&gt;;

    fn <a href="#tymethod.create" class="fnname">create</a>(scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.update" class="fnname">update</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Message" title="type gloo_worker::Worker::Message">Message</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.received" class="fnname">received</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Input" title="type gloo_worker::Worker::Input">Input</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a><br>&nbsp;&nbsp;&nbsp;&nbsp;);

    fn <a href="#method.connected" class="fnname">connected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.disconnected" class="fnname">disconnected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.destroy" class="fnname">destroy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct: <a class="struct" href="struct.WorkerDestroyHandle.html" title="struct gloo_worker::WorkerDestroyHandle">WorkerDestroyHandle</a>&lt;Self&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Declares the behaviour of a worker.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="associatedtype.Message" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#11">source</a><h4 class="code-header">type <a href="#associatedtype.Message" class="associatedtype">Message</a></h4></section></summary><div class="docblock"><p>Update message type.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="associatedtype.Input" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#13">source</a><h4 class="code-header">type <a href="#associatedtype.Input" class="associatedtype">Input</a>: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> + for&lt;'de&gt; <a class="trait" href="../serde/de/trait.Deserialize.html" title="trait serde::de::Deserialize">Deserialize</a>&lt;'de&gt;</h4></section></summary><div class="docblock"><p>Incoming message type.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="associatedtype.Output" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#15">source</a><h4 class="code-header">type <a href="#associatedtype.Output" class="associatedtype">Output</a>: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> + for&lt;'de&gt; <a class="trait" href="../serde/de/trait.Deserialize.html" title="trait serde::de::Deserialize">Deserialize</a>&lt;'de&gt;</h4></section></summary><div class="docblock"><p>Outgoing message type.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.create" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#18">source</a><h4 class="code-header">fn <a href="#tymethod.create" class="fnname">create</a>(scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates an instance of a worker.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.update" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#23">source</a><h4 class="code-header">fn <a href="#tymethod.update" class="fnname">update</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Message" title="type gloo_worker::Worker::Message">Message</a>)</h4></section></summary><div class="docblock"><p>Receives an update.</p>
<p>This method is called when the worker send messages to itself via <a href="struct.WorkerScope.html#method.send_message" title="WorkerScope::send_message"><code>WorkerScope::send_message</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.received" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#39">source</a><h4 class="code-header">fn <a href="#tymethod.received" class="fnname">received</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Input" title="type gloo_worker::Worker::Input">Input</a>, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>)</h4></section></summary><div class="docblock"><p>Receives an input from a connected bridge.</p>
<p>When a bridge sends an input via <a href="struct.WorkerBridge.html#method.send"><code>WorkerBridge::send</code></a>, the worker will receive the
input via this method.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.connected" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#30-33">source</a><h4 class="code-header">fn <a href="#method.connected" class="fnname">connected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>)</h4></section></summary><div class="docblock"><p>New bridge created.</p>
<p>When a new bridge is created by <a href="struct.WorkerSpawner.html"><code>WorkerSpawner::spawn</code></a>
or <a href="struct.WorkerBridge.html#method.fork"><code>WorkerBridge::fork</code></a>,
the worker will be notified the <a href="struct.HandlerId.html" title="HandlerId"><code>HandlerId</code></a> of the created bridge via this method.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.disconnected" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#44-47">source</a><h4 class="code-header">fn <a href="#method.disconnected" class="fnname">disconnected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>)</h4></section></summary><div class="docblock"><p>Existing bridge destroyed.</p>
<p>When a bridge is dropped, the worker will be notified with this method.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.destroy" class="method has-srclink"><a class="srclink rightside" href="../src/gloo_worker/traits.rs.html#61-64">source</a><h4 class="code-header">fn <a href="#method.destroy" class="fnname">destroy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;destruct: <a class="struct" href="struct.WorkerDestroyHandle.html" title="struct gloo_worker::WorkerDestroyHandle">WorkerDestroyHandle</a>&lt;Self&gt;<br>)</h4></section></summary><div class="docblock"><p>Destroys the current worker.</p>
<p>When all bridges are dropped, the method will be invoked.</p>
<p>This method is provided a destroy handle where when it is dropped, the worker is closed.
If the worker is closed immediately, then it can ignore the destroy handle.
Otherwise hold the destroy handle until the clean up task is finished.</p>
<h5 id="note"><a href="#note">Note</a></h5>
<p>This method will only be called after all bridges are disconnected.
Attempting to send messages after this method is called will have no effect.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"></div><script src="../implementors/gloo_worker/traits/trait.Worker.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="gloo_worker" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>