<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Declares the behaviour of a worker."><title>Worker in gloo_worker - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="gloo_worker" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.2 (25ef9e3d8 2024-04-09)" data-channel="1.77.2" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../gloo_worker/index.html">gloo_worker</a><span class="version">0.4.0</span></h2></div><h2 class="location"><a href="#">Worker</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Input">Input</a></li><li><a href="#associatedtype.Message">Message</a></li><li><a href="#associatedtype.Output">Output</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.create">create</a></li><li><a href="#tymethod.received">received</a></li><li><a href="#tymethod.update">update</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.connected">connected</a></li><li><a href="#method.destroy">destroy</a></li><li><a href="#method.disconnected">disconnected</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate gloo_worker</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../gloo_worker/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">gloo_worker</a>::<wbr><a class="trait" href="#">Worker</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/gloo_worker/actor/traits.rs.html#8-64">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Worker: <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    type <a href="#associatedtype.Message" class="associatedtype">Message</a>;
    type <a href="#associatedtype.Input" class="associatedtype">Input</a>;
    type <a href="#associatedtype.Output" class="associatedtype">Output</a>;

    // Required methods
    fn <a href="#tymethod.create" class="fn">create</a>(scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.update" class="fn">update</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Message" title="type gloo_worker::Worker::Message">Message</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.received" class="fn">received</a>(
        &amp;mut self,
        scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,
        msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Input" title="type gloo_worker::Worker::Input">Input</a>,
        id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>
    );

    // Provided methods
    fn <a href="#method.connected" class="fn">connected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.disconnected" class="fn">disconnected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>) { ... }
<span class="item-spacer"></span>    fn <a href="#method.destroy" class="fn">destroy</a>(
        &amp;mut self,
        scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,
        destruct: <a class="struct" href="struct.WorkerDestroyHandle.html" title="struct gloo_worker::WorkerDestroyHandle">WorkerDestroyHandle</a>&lt;Self&gt;
    ) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Declares the behaviour of a worker.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Message" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#10">source</a><h4 class="code-header">type <a href="#associatedtype.Message" class="associatedtype">Message</a></h4></section></summary><div class="docblock"><p>Update message type.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Input" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#12">source</a><h4 class="code-header">type <a href="#associatedtype.Input" class="associatedtype">Input</a></h4></section></summary><div class="docblock"><p>Incoming message type.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Output" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#14">source</a><h4 class="code-header">type <a href="#associatedtype.Output" class="associatedtype">Output</a></h4></section></summary><div class="docblock"><p>Outgoing message type.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.create" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#17">source</a><h4 class="code-header">fn <a href="#tymethod.create" class="fn">create</a>(scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates an instance of a worker.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.update" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#22">source</a><h4 class="code-header">fn <a href="#tymethod.update" class="fn">update</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Message" title="type gloo_worker::Worker::Message">Message</a>)</h4></section></summary><div class="docblock"><p>Receives an update.</p>
<p>This method is called when the worker send messages to itself via <a href="struct.WorkerScope.html#method.send_message" title="method gloo_worker::WorkerScope::send_message"><code>WorkerScope::send_message</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.received" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#38">source</a><h4 class="code-header">fn <a href="#tymethod.received" class="fn">received</a>(
    &amp;mut self,
    scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,
    msg: Self::<a class="associatedtype" href="trait.Worker.html#associatedtype.Input" title="type gloo_worker::Worker::Input">Input</a>,
    id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>
)</h4></section></summary><div class="docblock"><p>Receives an input from a connected bridge.</p>
<p>When a bridge sends an input via <a href="struct.WorkerBridge.html#method.send" title="method gloo_worker::WorkerBridge::send"><code>WorkerBridge::send</code></a>, the worker will receive the
input via this method.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.connected" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#29-32">source</a><h4 class="code-header">fn <a href="#method.connected" class="fn">connected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>)</h4></section></summary><div class="docblock"><p>New bridge created.</p>
<p>When a new bridge is created by <a href="crate::spawner::WorkerSpawner"><code>WorkerSpawner::spawn</code></a>
or <a href="struct.WorkerBridge.html#method.fork" title="method gloo_worker::WorkerBridge::fork"><code>WorkerBridge::fork</code></a>,
the worker will be notified the <a href="struct.HandlerId.html" title="struct gloo_worker::HandlerId"><code>HandlerId</code></a> of the created bridge via this method.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.disconnected" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#43-46">source</a><h4 class="code-header">fn <a href="#method.disconnected" class="fn">disconnected</a>(&amp;mut self, scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;, id: <a class="struct" href="struct.HandlerId.html" title="struct gloo_worker::HandlerId">HandlerId</a>)</h4></section></summary><div class="docblock"><p>Existing bridge destroyed.</p>
<p>When a bridge is dropped, the worker will be notified with this method.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.destroy" class="method"><a class="src rightside" href="../src/gloo_worker/actor/traits.rs.html#60-63">source</a><h4 class="code-header">fn <a href="#method.destroy" class="fn">destroy</a>(
    &amp;mut self,
    scope: &amp;<a class="struct" href="struct.WorkerScope.html" title="struct gloo_worker::WorkerScope">WorkerScope</a>&lt;Self&gt;,
    destruct: <a class="struct" href="struct.WorkerDestroyHandle.html" title="struct gloo_worker::WorkerDestroyHandle">WorkerDestroyHandle</a>&lt;Self&gt;
)</h4></section></summary><div class="docblock"><p>Destroys the current worker.</p>
<p>When all bridges are dropped, the method will be invoked.</p>
<p>This method is provided a destroy handle where when it is dropped, the worker is closed.
If the worker is closed immediately, then it can ignore the destroy handle.
Otherwise hold the destroy handle until the clean up task is finished.</p>
<h5 id="note"><a class="doc-anchor" href="#note">§</a>Note</h5>
<p>This method will only be called after all bridges are disconnected.
Attempting to send messages after this method is called will have no effect.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.77.2/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/gloo_worker/actor/traits/trait.Worker.js" async></script></section></div></main></body></html>